#include "weapon.h"
#include <windows.h>
#include <iostream>
#include <atomic>


//WeaponConfig flatline = {
//    { 0, 3.2380952380952377, 3.2380952380952377, 16.19047619047619, 8.904761904761903, 0.8095238095238094, -0.8095238095238094, -12.14285714285714, -4.0476190476190474, -8.095238095238095, -1.6190476190476188, 1.6190476190476188, 10.523809523809522, 14.57142857142857, 8.904761904761903, 6.476190476190475, 4.857142857142857, 3.2380952380952377, 11.333333333333332, -0.0, -9.714285714285714, -7.285714285714285, -13.761904761904761, -6.476190476190475 },
//    { 0, 31.571428571428566, 7.285714285714285, 16.19047619047619, 16.999999999999996, 12.14285714285714, 15.38095238095238, 3.2380952380952377, 9.714285714285714, 4.857142857142857, 12.95238095238095, 3.2380952380952377, 3.2380952380952377, 1.6190476190476188, 0.8095238095238094, 12.14285714285714, 5.666666666666666, 2.4285714285714284, 0.0, 5.666666666666666, 1.6190476190476188, 0.8095238095238094, 6.476190476190475, 0.8095238095238094, 3.2380952380952377, 2.4285714285714284, 3.2380952380952377, 2.4285714285714284 },
//    0,  // shotsFired
//    29,  // maxShots
//    40,  // sleep
//    5, // moveSleep
//    2,
//    3,
//};

WeaponConfig flatline = {
    { 0, 3.2380952380952377, 3.2380952380952377, 16.19047619047619, 8.904761904761903, 0.8095238095238094, -0.8095238095238094, -12.14285714285714, -4.0476190476190474, -8.095238095238095, -1.6190476190476188, 1.6190476190476188, 10.523809523809522, 14.57142857142857, 8.904761904761903, 6.476190476190475, 4.857142857142857, 3.2380952380952377, 11.333333333333332, -0.0, -9.714285714285714, -7.285714285714285, -13.761904761904761, -6.476190476190475 },
    { 0, 21.857142857142854, 31.571428571428566, 29.95238095238095, 23.476190476190474, 27.523809523809522, 28.33333333333333, 8.904761904761903, 4.0476190476190474, 2.4285714285714284, 8.095238095238095, 16.999999999999996, 2.4285714285714284, 13.761904761904761, 0.0, 4.857142857142857, 0.0, 16.999999999999996, 18.619047619047617, 10.523809523809522, 5.666666666666666, 2.4285714285714284, 7.285714285714285, 10.523809523809522, 4.857142857142857, 8.095238095238095, 1.6190476190476188, 3.2380952380952377, 8.095238095238095 },
    0,  // shotsFired
    29,  // maxShots
    22,  // sleep
    1,  // moveSleep
    2,
    4,
};


WeaponConfig volt = {
    { 0, 3.2380952380952377, 3.2380952380952377, 16.19047619047619, 8.904761904761903, 0.8095238095238094, -0.8095238095238094, -12.14285714285714, -4.0476190476190474, -8.095238095238095, -1.6190476190476188, 1.6190476190476188, 10.523809523809522, 14.57142857142857, 8.904761904761903, 6.476190476190475, 4.857142857142857, 3.2380952380952377, 11.333333333333332, -0.0, -9.714285714285714, -7.285714285714285, -13.761904761904761, -6.476190476190475 },
    { 0, 16.19047619047619, 19.428571428571427, 17.809523809523807, 15.38095238095238, 21.047619047619044, 10.523809523809522, 19.428571428571427, 22.666666666666664, 12.14285714285714, 19.428571428571427, 3.2380952380952377, 0.0, 10.523809523809522, 5.666666666666666, 0.8095238095238094, 4.857142857142857, 2.4285714285714284, 0.8095238095238094, 4.0476190476190474, 2.4285714285714284, 8.904761904761903, 3.2380952380952377, 1.6190476190476188, 9.714285714285714, 8.904761904761903 },
    0,  // shotsFired
    26,  // maxShots
    3,  // sleep
    3,  // moveSleep
    4,
    2,
};


WeaponConfig car = {
    { 0, 1.6190476190476188, 8.904761904761903, 2.4285714285714284, 5.666666666666666, 4.0476190476190474, 9.714285714285714, 5.666666666666666, -5.666666666666666, -8.095238095238095, -4.0476190476190474, 1.6190476190476188, -12.14285714285714, -7.285714285714285, -9.714285714285714, 2.4285714285714284, 12.95238095238095, 9.714285714285714, 12.14285714285714, -8.904761904761903, -17.809523809523807, -17.809523809523807, 3.2380952380952377, 8.095238095238095, 8.095238095238095 },
    { 0, 17.809523809523807, 20.238095238095237, 12.95238095238095, 28.33333333333333, 20.238095238095237, 21.857142857142854, 16.999999999999996, 29.14285714285714, 25.09523809523809, 24.28571428571428, 1.6190476190476188, 5.666666666666666, 2.4285714285714284, 3.2380952380952377, 12.14285714285714, 3.2380952380952377, -0.0, 15.38095238095238, 12.14285714285714, -0.0, 2.4285714285714284, 7.285714285714285, 12.95238095238095, 5.666666666666666 },
    0,  // shotsFired
    27,  // maxShots
    1,  // sleep
    6,   // moveSleep
    2,
    2
};



// Weapon configurations
std::atomic<WeaponConfig*> currentWeapon = nullptr; // Default to no weapon

// Function to switch weapon configuration 
void switchWeapon()
{
    if (GetAsyncKeyState(VK_NUMPAD1) & 0x8000)
    {
        currentWeapon = &flatline;
		system("cls");
        Sleep(10); // Debounce 
        std::cout << "Switched to Flatline" << std::endl;
    }
    else if (GetAsyncKeyState(VK_NUMPAD2) & 0x8000)
    {
        currentWeapon = &car;
        Sleep(10); // Debounce 
        system("cls");
        std::cout << "Switched to CAR" << std::endl;
    }
    else if (GetAsyncKeyState(VK_NUMPAD3) & 0x8000)
    {
        currentWeapon = &volt;
        Sleep(10); // Debounce 
        system("cls");
        std::cout << "Switched to Volt" << std::endl;
    }
    else if (GetAsyncKeyState(VK_NUMPAD0) & 0x8000)
    {
        currentWeapon = nullptr; // Set to nullptr to indicate no weapon 
        Sleep(10); // Debounce 
        system("cls");
        std::cout << "No weapon selected" << std::endl;
    }
}
